<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>STRETCH&STRENGTH</title>
  <meta name="description" content="奥沢駅、緑が丘駅、自由が丘駅から徒歩15分圏内のストレッチとトレーニングが両方できるパーソナルジム">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="images/favicon.jpg">
  <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>

  <div class="video-container" id="video-area">
    <video id="background-video" src="video/STRETCH&STRENGTH PV.mp4" loop autoplay muted playsinline></video>
    <header>
      <a href="index.html"><img id="logo" src="images/logo.jpg" alt="STRENGTH&STRETCH"></a>
      <nav>
        <ul>
          <li><a href="#service-area">SERVICE</a></li>
          <li><a href="service.html#plan-area">PLAN</a></li>
          <li><a href="#contact-area">CONTACT</a></li>
          <li><a href="#location-area">LOCATION</a></li>
        </ul>
      </nav>
    </header>
  </div>

  <section class="service-sec" id="service-area">
    <h2 id="service-title">SERVICE</h2>
    <h3>施術内容</h3>
    <div class="image-container">
      <img src="images/gym.jpg" alt="Service Image" id="service-image">
    </div>
    <!-- 画像切り替え部分 -->
    <div class="image-switcher">
      <button onclick="changeImage('images/gym.jpg', this)"></button>
      <button onclick="changeImage('images/gym-second.jpg', this)"></button>
      <button onclick="changeImage('images/gym-third.jpg', this)"></button>
    </div>
    <div class="service-intro">
        <p>完全個室ストレッチで姿勢改善<br>パーソナルトレーニング<br>着替え不要、サプリメント&シャワー完備</p>
        <a href="service.html" class="detail-button slide">サービスの詳細はこちら</a>
    </div>
  </section>

  <section class="blog-sec" id="blog-area">
    <h2 id="blog-title">BLOG</h2>
    <h3>ブログ</h3>
    <div id="posts-container" class="text-line">
      <p>記事を読み込んでいます...</p>
    </div>
    <a href="https://motorogu-essays-in-idleness.com/author/love-baseball-boy8989gmail-com/" class="blog-button">Post List</a>
  </section>

  <section class="phrase-sec" id="phrase-area">
    あなたの習慣に、フィットネスを。
  </section>

  <section class="contact-sec" id="contact-area">
    <h2 id="contact-title">CONTACT</h2>
    <h3>お問い合わせ</h3>
    <div class="images-top">
      <div class="sns-container">
        <p class="small-word">ジムの最新情報</p>
        <div class="images-top-container">
          <a href="https://www.instagram.com/s.s_ebisu/?hl=ja"><img src="images/instagram.jpg" alt="Image 1"></a>
        </div>      
        <p class="sns-name">Instagram</p>
      </div>
      <div class="sns-container line">
        <p class="small-word">ご予約はこちらから</p>
        <div class="images-top-container">
          <a href="https://lin.ee/CbDa0gM"><img src="images/line.jpg" alt="Image 2"></a>
        </div>
        <p class="sns-name">official LINE</p>
      </div>
    </div>
    <div class="images-bottom">
      <div class="sns-container">
        <div class="image-bottom-container">
          <a href="https://twitter.com/motonori89?lang=ja"><img src="images/x.jpg" alt="Image 3"></a>
        </div>        
        <!--<p class="sns-name">X</p>-->
      </div>
      <div class="sns-container">
        <div class="image-bottom-container">
          <a href="https://www.youtube.com/@moto.89"><img src="images/youtube.jpg" alt="Image 4"></a>
        </div>        
        <!--<p class="sns-name">Youtube</p>-->
      </div>
    </div>
  </section>

  <section class="location-sec" id="location-area">
    <h2 id="location-title">LOCATION</h2>
    <h3>店舗情報</h3>
    <div class="text-area">
      <div class="text-block adress-block">
        <span>住所</span>
        <div class="block"></div>
        <p>東京都世田谷区1-25-4 ARKHOUSE自由が丘201</p>
      </div>
      <div class="text-block access-block">
        <span>アクセス</span>
        <div class="block"></div>
        <p>奥沢駅徒歩5分/緑が丘駅徒歩10分/自由が丘駅徒歩15分</p>
      </div>
    </div>
    <div class="map-area">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12519.408432730104!2d139.71182905001558!3d35.6432904766393!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188b53d275d47f%3A0x7b9b1a5e4a5ddcd5!2zU1RSRU5HVEgmU1RSRVRDSCjjgrnjg4jjg6zjg7PjgrDjgrnjgqLjg7Pjg4njgrnjg4jjg6zjg4Pjg4EpIOaBteavlOWvvw!5e0!3m2!1sja!2sjp!4v1704579138520!5m2!1sja!2sjp" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-links">
      <div><a href="#service-area">SERVICE</a></div>
      <div><a href="service.html#plan-area">PLAN</a></div>
      <div><a href="#blog-area">BLOG</a></div>
      <div><a href="service.html#reservation-area">RESERVATION</a></div>
      <div><a href="#contact-area">CONTACT</a></div>
      <div><a href="service.html#profile-area">TRAINER</a></div>
      <div><a href="#location-area">LOCATION</a></div>
      <div><a href="service.html#qa-area">Q&A</a></div>
    </div>
    <div class="policy-info">
      <p><a href="https://motorogu-essays-in-idleness.com/privacypolicy/">プライバシーポリシー</a></p>
      <p>|</p>
      <p><a href="https://motorogu-essays-in-idleness.com/104-2/">お問い合わせ</a></p>
    </div>
    <div class="footer-bottom">
      © 2024 STRETCH&STRENGTH
    </div>
  </footer>

  <script>
    // スライド写真の処理
    function changeImage(newImageSrc, button) {
      console.log(newImageSrc)
      console.log(button)
      // 画像を変更
      document.getElementById('service-image').src = newImageSrc;
    
      // すべてのボタンを白に設定
      document.querySelectorAll('.image-switcher button').forEach(function(btn) {
        btn.style.backgroundColor = 'white';
        btn.style.color = 'black';
      });
    
      // 選択されたボタンをピンクに設定
      button.style.backgroundColor = '#ff7761';
      button.style.color = '#ff7761';
    }

    // ページ読み込み時に最初のボタンのクリックをシミュレート
    window.onload = function() {
      // 最初の画像の高さを取得
      var firstImageHeight = document.querySelector('.image-container img').clientHeight;

      // すべての画像に最初の画像の高さを設定
      document.querySelectorAll('.image-container img').forEach(function(img) {
        img.style.height = firstImageHeight + 'px';
      });

      // 最初のボタンのクリックをシミュレート
      var firstButton = document.querySelector('.image-switcher button');
      changeImage('images/gym.jpg', firstButton);
    };

    // ページの読み込み後に実行
    window.addEventListener('DOMContentLoaded', function () {
      const header = document.querySelector('header');
      const videoContainerHeight = document.getElementById('video-area').clientHeight
      const serviceTitle = document.getElementById('service-title');
      const serviceContainerHeight = document.getElementById('service-area').clientHeight
      const blogTitle = document.getElementById('blog-title');
      const blogContainerHeight = document.getElementById('blog-area').clientHeight
      const phraseContainerHeight = document.getElementById('phrase-area').clientHeight
      const contactTitle = document.getElementById('contact-title');
      const contactContainerHeight = document.getElementById('contact-area').clientHeight
      const locationTitle = document.getElementById('location-title');

      // スクロールイベントを監視
      window.addEventListener('scroll', function () {
        if (window.scrollY > videoContainerHeight) {
          // スクロール位置がvideo-containerより大きい場合、背景色を変更
          header.style.transition = 'background-color 0.3s';
          header.style.backgroundColor = 'black';
        } else {
          // スクロール位置がvideo-container以下の場合、背景色を透明にする
          header.style.transition = 'background-color 0.3s';
          header.style.backgroundColor = 'rgba(0, 0, 0, 0)';
        }

        if (window.scrollY > videoContainerHeight * 0.8) {
          serviceTitle.style.borderBottomColor = '#ff7761';
        }
        if (window.scrollY > (videoContainerHeight + serviceContainerHeight) * 0.8) {
          blogTitle.style.borderBottomColor = '#ff7761';
        }
        if (window.scrollY > (videoContainerHeight + serviceContainerHeight + blogContainerHeight + phraseContainerHeight) * 1) {
          contactTitle.style.borderBottomColor = '#ff7761';
        }
        if (window.scrollY > (videoContainerHeight + serviceContainerHeight + blogContainerHeight + phraseContainerHeight + contactContainerHeight) * 1) {
          locationTitle.style.borderBottomColor = '#ff7761';
        }
      });

      // 対象のブログ著者のRSSフィードURL
      // WordPressの場合、著者ページの末尾に /feed/ をつけるとRSSフィードを取得できることが一般的です
      const feedUrl = 'https://motorogu-essays-in-idleness.com/author/love-baseball-boy8989gmail-com/feed/';
      
      // 複数のCORSプロキシサービスを定義（フォールバック機能）
      const proxyServices = [
          'https://corsproxy.io/?' + encodeURIComponent(feedUrl)       
      ];

      // 記事を表示するコンテナ要素を取得
      const postsContainer = document.getElementById('posts-container');

      // プロキシサービスを順番に試す関数
      async function fetchWithFallback() {
          for (let i = 0; i < proxyServices.length; i++) {
              try {
                  console.log(`プロキシサービス ${i + 1} を試行中: ${proxyServices[i]}`);
                  const response = await fetch(proxyServices[i]);
                  
                  if (!response.ok) {
                      throw new Error(`HTTP error! status: ${response.status}`);
                  }
                  
                  return await response.text();

              } catch (error) {
                  console.log(`プロキシサービス ${i + 1} でエラー:`, error);
                  if (i === proxyServices.length - 1) {
                      throw new Error('すべてのプロキシサービスが利用できません。');
                  }
              }
          }
      }

      // RSSフィードを取得
      fetchWithFallback()
          .then(xmlContent => {
              console.log('取得したXMLコンテンツ:', xmlContent);
              // XMLとして解析
              const xmlData = new window.DOMParser().parseFromString(xmlContent, "text/xml");
              
              // すべての記事アイテム（<item>タグ）を取得
              const items = xmlData.querySelectorAll("item");

              // 表示するHTMLを格納する変数
              let html = '<ul>';

              // 取得したアイテムのうち、最初の4件だけをループ処理
              // RSSフィードは通常、新しい順に並んでいるため、slice(0, 4)で最新の4件を取得できます
              Array.from(items).slice(0, 4).forEach(item => {
                  // 各アイテムからタイトルとリンクを取得
                  const title = item.querySelector("title").textContent;
                  const link = item.querySelector("link").textContent;                

                  // リストアイテムとしてHTMLを組み立てる
                  html += `<li><a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a></li>`;                                    
              });

              html += '</ul>';

              // 組み立てたHTMLをコンテナに挿入
              postsContainer.innerHTML = html;
          })
          .catch(error => {
              // エラーが発生した場合の処理
              console.error('記事の取得中にエラーが発生しました:', error);
              postsContainer.innerHTML = '<p>記事の読み込みに失敗しました。</p>';
          });
    });
  </script>      

</body>
</html>